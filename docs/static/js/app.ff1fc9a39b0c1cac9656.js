webpackJsonp([1],{B6z3:function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("7+uW"),i=e("3zJd"),o=e.n(i)()(),a=o.get(),s={xFormula:a.xf||"Math.cos((Math.cos(p.y)-p.x*p.y))",yFormula:a.yf||"(p.x)",seed:{value:a.seed||10}},u=function(t,n,e){var r=n[0],i=n[1],o=e[0]-r,a=e[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=e[0],i=e[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a},c=function(t,n){if(t.length<=1)return t;var e=(n="number"==typeof n?n:1)*n,r=t.length-1,i=[t[0]];return function t(n,e,r,i,o){for(var a=i,s=void 0,c=e+1;c<r;c++){var l=u(n[c],n[e],n[r]);l>a&&(s=c,a=l)}a>i&&(s-e>1&&t(n,e,s,i,o),o.push(n[s]),r-s>1&&t(n,s,r,i,o))}(t,0,r,e,i),i.push(t[r]),i},l=e("Zx67"),h=e.n(l),d=e("zwoO"),p=e.n(d),f=e("Pf15"),v=e.n(f),g=e("Zrlr"),m=e.n(g),b=e("wxAW"),w=e.n(b),y={POINT:10,LENGTH:5,TRIGONOMETRY:9,ARITHMETICS:6,MINMAX:4,EXP:1,SIGN:.1},M=function(){function t(n){m()(this,t),this.probability=0,this.className=n}return w()(t,[{key:"getProbability",value:function(){return y[this.className]}},{key:"render",value:function(){return""}}]),t}(),x=function(t){function n(t,e){m()(this,n);var r=p()(this,(n.__proto__||h()(n)).call(this,e));return r.operator=t,r}return v()(n,t),w()(n,[{key:"render",value:function(){var t=this.getProbability();y[this.className]*=.25,E();var n=N();return y[this.className]=t,E(),this.operator(n)}}]),n}(M),_=function(t){function n(t,e){m()(this,n);var r=p()(this,(n.__proto__||h()(n)).call(this,e));return r.operator=t,r}return v()(n,t),w()(n,[{key:"render",value:function(){var t=this.getProbability();y[this.className]*=.25,E();var n=N(),e=N();return y[this.className]=t,E(),this.operator(n,e)}}]),n}(M),S=function(t){function n(t,e){m()(this,n);var r=p()(this,(n.__proto__||h()(n)).call(this,e));return r.constant=t,r}return v()(n,t),w()(n,[{key:"render",value:function(){return this.constant}}]),n}(M),T=[new S("p.x","POINT"),new S("p.y","POINT"),new S("Math.sqrt(p.x*p.x + p.y * p.y)","LENGTH"),new x(function(t){return"Math.sin("+t+")"},"TRIGONOMETRY"),new x(function(t){return"Math.cos("+t+")"},"TRIGONOMETRY"),new _(function(t,n){return t+"*"+n},"ARITHMETICS"),new _(function(t,n){return t+"/"+n},"ARITHMETICS"),new _(function(t,n){return"("+t+"+"+n+")"},"ARITHMETICS"),new _(function(t,n){return"("+t+"-"+n+")"},"ARITHMETICS"),new _(function(t,n){return t===n?t:"Math.min("+t+","+n+")"},"MINMAX"),new _(function(t,n){return t===n?t:"Math.max("+t+","+n+")"},"MINMAX"),new x(function(t){return"Math.log(Math.abs("+t+"))"},"EXP"),new x(function(t){return"Math.exp("+t+")"},"EXP"),new _(function(t,n){return"Math.pow("+t+", "+n+")"},"EXP"),new x(function(t){return"Math.abs("+t+")"},"SIGN"),new x(function(t){return"Math.sign("+t+")"},"SIGN")];function E(){var t=0;T.forEach(function(n){return t+=n.getProbability()}),T.forEach(function(n){return n.probability=n.getProbability()/t})}function N(){for(var t=Math.random(),n=0,e=void 0,r=0;r<T.length&&!(t<(n+=(e=T[r]).probability));++r);if(!e)throw new Error("no more items");return e.render()}var I=e("KMTX"),F=e.n(I),P=e("or9x"),C=function(t){return{x:Math.cos(Math.cos(t.y)-t.x*t.y),y:t.x}},R=null,B=void 0,k={name:"App",data:function(){return{appState:s,paper:{width:600,height:600},config:{separationDistance:.2,simplification:.1,paperWidth:600,paperHeight:600,boundingBox:{left:-5,top:-5,width:10,height:10}},seedPoint:{}}},mounted:function(){B=P("drawing").size(this.paper.width,this.paper.height),this.seedPoint={x:this.config.boundingBox.left+Math.random()*this.config.boundingBox.width,y:this.config.boundingBox.top+Math.random()*this.config.boundingBox.height},this.generateStreamlines()},methods:{resetXFormula:function(){this.appState.xFormula="Math.cos((Math.cos(p.y)-p.x*p.y))"},resetYFormula:function(){this.appState.yFormula="(p.x)"},download:function(){!function(t){var n=(new XMLSerializer).serializeToString(t);n=n.replace(/([\-+]?\d{1,}\.\d{3,}([eE][\-+]?\d+)?)/g,function(t){return(+t).toFixed(1)});var e=new Blob(['<?xml version="1.0" encoding="UTF-8" standalone="no"?>'+n],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download="streamlines"+Date.now()+".svg",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}(B)},compileVectorFieldFunction:function(t){try{var n=new Function(t+"\nreturn vectorField;")();return n(this.seedPoint),n}catch(t){return alert(t.message),null}},generateStreamlines:function(){B.clear();var t=B.group(),n=this.config,e=this.paper;(R=F()({vectorField:C,onStreamlineAdded:function(r){for(var i=[],o=0;o<r.length;o++){var a=(r[o].x-n.boundingBox.left)/n.boundingBox.width,s=(r[o].y-n.boundingBox.top)/n.boundingBox.height;i.push([Math.round(a*e.width*10)/10,Math.round((1-s)*e.height*10)/10])}var u=c(i,n.simplification);t.polyline(u).fill("none").stroke({width:1})},seed:this.seedPoint,boundingBox:n.boundingBox,dSep:n.separationDistance,dTest:.001,timeStep:.05})).run()},regenerateStreamlines:function(){var t=(E(),"function vectorField(p) {\n  return {\n    x: "+N()+",\n    y: "+N()+"\n  };\n}");C=this.compileVectorFieldFunction(t),R.dispose(),this.generateStreamlines()}},watch:{"appState.xFormula":function(t){o.set({xf:t})},"appState.yFormula":function(t){o.set({yf:t})},"appState.seed.value":function(t){o.set({seed:t})}}},A={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page"},[e("div",{staticClass:"sidebar"},[e("div",{staticClass:"controls-wrapper"},[e("button",{on:{click:t.regenerateStreamlines}},[t._v("Regenerate")])]),t._v(" "),e("div",{staticClass:"button"},[e("div",{staticClass:"reveal"}),t._v(" "),e("button",{staticClass:"btn btn-primary btn-block",on:{click:function(n){return n.preventDefault(),t.download(n)}}},[t._v("\n        Download SVG\n      ")])])]),t._v(" "),t._m(0),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"paper"},[n("div",{staticClass:"sketch"},[n("div",{attrs:{id:"drawing"}})])])},function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"footer-wrapper"},[n("div",{staticClass:"footer"},[n("h1",[this._v("Streamlines")])])])}]};var O=e("VU/8")(k,A,!1,function(t){e("htrH")},"data-v-a50a68f2",null).exports,H=(e("B6z3"),e("QEfS")),X=e.n(H);e.d(n,"eventBus",function(){return G});var G=new r.a;r.a.config.productionTip=!1,r.a.use(X.a,{tagName:"svgicon"}),new r.a({el:"#app",components:{App:O},template:"<App/>"})},htrH:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.ff1fc9a39b0c1cac9656.js.map